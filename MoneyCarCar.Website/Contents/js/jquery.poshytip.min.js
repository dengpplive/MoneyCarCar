
(function($){var tips=[],reBgImage=/^url\(["']?([^"'\)]*)["']?\);?$/i,rePNG=/\.png$/i,ie6=!!window.createPopup&&document.documentElement.currentStyle.minWidth=='undefined';function handleWindowResize(){$.each(tips,function(){this.refresh(true);});}
$(window).resize(handleWindowResize);$.Poshytip=function(elm,options){this.$elm=$(elm);this.opts=$.extend({},$.fn.poshytip.defaults,options);this.$tip=$(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>','</div>'].join('')).appendTo(document.body);this.$arrow=this.$tip.find('div.tip-arrow');this.$inner=this.$tip.find('div.tip-inner');this.disabled=false;this.content=null;this.init();};$.Poshytip.prototype={init:function(){tips.push(this);var title=this.$elm.attr('title');this.$elm.data('title.poshytip',title!==undefined?title:null).data('poshytip',this);if(this.opts.showOn!='none'){this.$elm.bind({'mouseenter.poshytip':$.proxy(this.mouseenter,this),'mouseleave.poshytip':$.proxy(this.mouseleave,this)});switch(this.opts.showOn){case'hover':if(this.opts.alignTo=='cursor')
this.$elm.bind('mousemove.poshytip',$.proxy(this.mousemove,this));if(this.opts.allowTipHover)
this.$tip.hover($.proxy(this.clearTimeouts,this),$.proxy(this.mouseleave,this));break;case'focus':this.$elm.bind({'focus.poshytip':$.proxy(this.showDelayed,this),'blur.poshytip':$.proxy(this.hideDelayed,this)});break;}}},mouseenter:function(e){if(this.disabled)
return true;this.$elm.attr('title','');this.$elm.addClass("on");if(this.opts.showOn=='focus')
return true;this.showDelayed();},mouseleave:function(e){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===e.relatedTarget||jQuery.contains(this.$tip[0],e.relatedTarget)))
return true;if(!this.$tip.data('active')){var title=this.$elm.data('title.poshytip');if(title!==null)
this.$elm.attr('title',title);this.$elm.removeClass("on");}
if(this.opts.showOn=='focus')
return true;this.hideDelayed();},mousemove:function(e){if(this.disabled)
return true;this.eventX=e.pageX;this.eventY=e.pageY;if(this.opts.followCursor&&this.$tip.data('active')){this.calcPos();this.$tip.css({left:this.pos.l,top:this.pos.t});if(this.pos.arrow)
this.$arrow[0].className='tip-arrow tip-arrow-'+this.pos.arrow;}},show:function(){if(this.disabled||this.$tip.data('active'))
return;this.reset();this.update();if(!this.content)
return;this.display();if(this.opts.timeOnScreen)
this.hideDelayed(this.opts.timeOnScreen);},showDelayed:function(timeout){this.clearTimeouts();this.showTimeout=setTimeout($.proxy(this.show,this),typeof timeout=='number'?timeout:this.opts.showTimeout);},hide:function(){if(this.disabled||!this.$tip.data('active'))
return;this.display(true);},hideDelayed:function(timeout){this.clearTimeouts();this.hideTimeout=setTimeout($.proxy(this.hide,this),typeof timeout=='number'?timeout:this.opts.hideTimeout);},reset:function(){this.$tip.queue([]).detach().css('visibility','hidden').data('active',false);this.$inner.find('*').poshytip('hide');if(this.opts.fade)
this.$tip.css('opacity',this.opacity);this.$arrow[0].className='tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left';this.asyncAnimating=false;},update:function(content,dontOverwriteOption){if(this.disabled)
return;var async=content!==undefined;if(async){if(!dontOverwriteOption)
this.opts.content=content;if(!this.$tip.data('active'))
return;}else{content=this.opts.content;}
var self=this,newContent=typeof content=='function'?content.call(this.$elm[0],function(newContent){self.update(newContent);}):content=='[title]'?this.$elm.data('title.poshytip'):content;if(this.content!==newContent){this.$inner.empty().append(newContent);this.content=newContent;}
this.refresh(async);},refresh:function(async){if(this.disabled)
return;if(async){if(!this.$tip.data('active'))
return;var currPos={left:this.$tip.css('left'),top:this.$tip.css('top')};}
this.$tip.css({left:0,top:0}).appendTo(document.body);if(this.opacity===undefined)
this.opacity=this.$tip.css('opacity');var bgImage=this.$tip.css('background-image').match(reBgImage),arrow=this.$arrow.css('background-image').match(reBgImage);if(bgImage){var bgImagePNG=rePNG.test(bgImage[1]);if(ie6&&bgImagePNG){this.$tip.css('background-image','none');this.$inner.css({margin:0,border:0,padding:0});bgImage=bgImagePNG=false;}else{this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,'background-image':'none','background-color':'transparent'}).find('.tip-bg-image').css('background-image','url("'+bgImage[1]+'")').end().find('td').eq(3).append(this.$inner);}
if(bgImagePNG&&!$.support.opacity)
this.opts.fade=false;}
if(arrow&&!$.support.opacity){if(ie6&&rePNG.test(arrow[1])){arrow=false;this.$arrow.css('background-image','none');}
this.opts.fade=false;}
var $table=this.$tip.find('> table.tip-table');if(ie6){this.$tip[0].style.width='';$table.width('auto').find('td').eq(3).width('auto');var tipW=this.$tip.width(),minW=parseInt(this.$tip.css('min-width')),maxW=parseInt(this.$tip.css('max-width'));if(!isNaN(minW)&&tipW<minW)
tipW=minW;else if(!isNaN(maxW)&&tipW>maxW)
tipW=maxW;this.$tip.add($table).width(tipW).eq(0).find('td').eq(3).width('100%');}else if($table[0]){$table.width('auto').find('td').eq(3).width('auto').end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find('td').eq(3).width('100%');}
this.tipOuterW=this.$tip.outerWidth();this.tipOuterH=this.$tip.outerHeight();this.calcPos();if(arrow&&this.pos.arrow){this.$arrow[0].className='tip-arrow tip-arrow-'+this.pos.arrow;this.$arrow.css('visibility','inherit');}
if(async&&this.opts.refreshAniDuration){this.asyncAnimating=true;var self=this;this.$tip.css(currPos).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){self.asyncAnimating=false;});}else{this.$tip.css({left:this.pos.l,top:this.pos.t});}},display:function(hide){var active=this.$tip.data('active');if(active&&!hide||!active&&hide)
return;this.$tip.stop();if((this.opts.slide&&this.pos.arrow||this.opts.fade)&&(hide&&this.opts.hideAniDuration||!hide&&this.opts.showAniDuration)){var from={},to={};if(this.opts.slide&&this.pos.arrow){var prop,arr;if(this.pos.arrow=='bottom'||this.pos.arrow=='top'){prop='top';arr='bottom';}else{prop='left';arr='right';}
var val=parseInt(this.$tip.css(prop));from[prop]=val+(hide?0:(this.pos.arrow==arr?-this.opts.slideOffset:this.opts.slideOffset));to[prop]=val+(hide?(this.pos.arrow==arr?this.opts.slideOffset:-this.opts.slideOffset):0)+'px';}
if(this.opts.fade){from.opacity=hide?this.$tip.css('opacity'):0;to.opacity=hide?0:this.opacity;}
this.$tip.css(from).animate(to,this.opts[hide?'hideAniDuration':'showAniDuration']);}
hide?this.$tip.queue($.proxy(this.reset,this)):this.$tip.css('visibility','inherit');if(active){var title=this.$elm.data('title.poshytip');if(title!==null)
this.$elm.attr('title',title);this.$elm.removeClass("on");}
this.$tip.data('active',!active);},disable:function(){this.reset();this.disabled=true;},enable:function(){this.disabled=false;},destroy:function(){this.reset();this.$tip.remove();delete this.$tip;this.content=null;this.$elm.unbind('.poshytip').removeData('title.poshytip').removeData('poshytip');tips.splice($.inArray(this,tips),1);},clearTimeouts:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0;}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0;}},calcPos:function(){var pos={l:0,t:0,arrow:''},$win=$(window),win={l:$win.scrollLeft(),t:$win.scrollTop(),w:$win.width(),h:$win.height()},xL,xC,xR,yT,yC,yB;if(this.opts.alignTo=='cursor'){xL=xC=xR=this.eventX;yT=yC=yB=this.eventY;}else{var elmOffset=this.$elm.offset(),elm={l:elmOffset.left,t:elmOffset.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};xL=elm.l+(this.opts.alignX!='inner-right'?0:elm.w);xC=xL+Math.floor(elm.w/2);xR=xL+(this.opts.alignX!='inner-left'?elm.w:0);yT=elm.t+(this.opts.alignY!='inner-bottom'?0:elm.h);yC=yT+Math.floor(elm.h/2);yB=yT+(this.opts.alignY!='inner-top'?elm.h:0);}
switch(this.opts.alignX){case'right':case'inner-left':pos.l=xR+this.opts.offsetX;if(this.opts.keepInViewport&&pos.l+this.tipOuterW>win.l+win.w)
pos.l=win.l+win.w-this.tipOuterW;if(this.opts.alignX=='right'||this.opts.alignY=='center')
pos.arrow='left';break;case'center':pos.l=xC-Math.floor(this.tipOuterW/2);if(this.opts.keepInViewport){if(pos.l+this.tipOuterW>win.l+win.w)
pos.l=win.l+win.w-this.tipOuterW;else if(pos.l<win.l)
pos.l=win.l;}
break;default:pos.l=xL-this.tipOuterW-this.opts.offsetX;if(this.opts.keepInViewport&&pos.l<win.l)
pos.l=win.l;if(this.opts.alignX=='left'||this.opts.alignY=='center')
pos.arrow='right';}
switch(this.opts.alignY){case'bottom':case'inner-top':pos.t=yB+this.opts.offsetY;if(!pos.arrow||this.opts.alignTo=='cursor')
pos.arrow='top';if(this.opts.keepInViewport&&pos.t+this.tipOuterH>win.t+win.h){pos.t=yT-this.tipOuterH-this.opts.offsetY;if(pos.arrow=='top')
pos.arrow='bottom';}
break;case'center':pos.t=yC-Math.floor(this.tipOuterH/2);if(this.opts.keepInViewport){if(pos.t+this.tipOuterH>win.t+win.h)
pos.t=win.t+win.h-this.tipOuterH;else if(pos.t<win.t)
pos.t=win.t;}
break;default:pos.t=yT-this.tipOuterH-this.opts.offsetY;if(!pos.arrow||this.opts.alignTo=='cursor')
pos.arrow='bottom';if(this.opts.keepInViewport&&pos.t<win.t){pos.t=yB+this.opts.offsetY;if(pos.arrow=='bottom')
pos.arrow='top';}}
this.pos=pos;}};$.fn.poshytip=function(options){if(typeof options=='string'){var args=arguments,method=options;Array.prototype.shift.call(args);if(method=='destroy'){this.die?this.die('mouseenter.poshytip').die('focus.poshytip'):$(document).undelegate(this.selector,'mouseenter.poshytip').undelegate(this.selector,'focus.poshytip');}
return this.each(function(){var poshytip=$(this).data('poshytip');if(poshytip&&poshytip[method])
poshytip[method].apply(poshytip,args);});}
var opts=$.extend({},$.fn.poshytip.defaults,options);if(!$('#poshytip-css-'+opts.className)[0])
$(['<style id="poshytip-css-',opts.className,'" type="text/css">','div.',opts.className,'{visibility:hidden;position:absolute;top:0;left:0;}','div.',opts.className,' table.tip-table, div.',opts.className,' table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}','div.',opts.className,' td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:',opts.bgImageFrameSize,'px;width:',opts.bgImageFrameSize,'px;overflow:hidden;}','div.',opts.className,' td.tip-right{background-position:100% 0;}','div.',opts.className,' td.tip-bottom{background-position:100% 100%;}','div.',opts.className,' td.tip-left{background-position:0 100%;}','div.',opts.className,' div.tip-inner{background-position:-',opts.bgImageFrameSize,'px -',opts.bgImageFrameSize,'px;}','div.',opts.className,' div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}','</style>'].join('')).appendTo('head');if(opts.liveEvents&&opts.showOn!='none'){var handler,deadOpts=$.extend({},opts,{liveEvents:false});switch(opts.showOn){case'hover':handler=function(){var $this=$(this);if(!$this.data('poshytip'))
$this.poshytip(deadOpts).poshytip('mouseenter');};this.live?this.live('mouseenter.poshytip',handler):$(document).delegate(this.selector,'mouseenter.poshytip',handler);break;case'focus':handler=function(){var $this=$(this);if(!$this.data('poshytip'))
$this.poshytip(deadOpts).poshytip('showDelayed');};this.live?this.live('focus.poshytip',handler):$(document).delegate(this.selector,'focus.poshytip',handler);break;}
return this;}
return this.each(function(){new $.Poshytip(this,opts);});}
$.fn.poshytip.defaults = { content: '[title]', className: 'tip-yellow', bgImageFrameSize: 10, showTimeout: 500, hideTimeout: 100, timeOnScreen: 0, showOn: 'hover', liveEvents: false, alignTo: 'cursor', alignX: 'right', alignY: 'top', offsetX: -22, offsetY: 18, keepInViewport: true, allowTipHover: true, followCursor: false, fade: true, slide: true, slideOffset: 8, showAniDuration: 300, hideAniDuration: 300, refreshAniDuration: 200 };
})(jQuery);

(function ($) {
    $.sticky = function (note, options, callback) {
        return $.fn.sticky(note, options, callback)
    };
    $.fn.sticky = function (note, options, callback) {
        // var position = "top-right";
        var settings = {
            speed: "fast",
            duplicates: true,
            autoclose: 5000,
            position: 'top-right'
        };
        if (!note) {
            note = this.html()
        }
        if (options) {
            $.extend(settings, options)
        }
        var display = true;
        var duplicate = "no";
        var uniqID = Math.floor(Math.random() * 99999);
        $(".sticky-note").each(function () {
            if ($(this).html() == note && $(this).is(":visible")) {
                duplicate = "yes";
                if (!settings.duplicates) {
                    display = false
                }
            }
            if ($(this).attr("id") == uniqID) {
                uniqID = Math.floor(Math.random() * 9999999)
            }
        });
        if (!$(".header").find(".sticky-queue").html()) {
            $(".header").append('<div class="sticky-queue ' + settings.position + ' hover"></div>')
        }
        if (display) {
            $(".sticky-queue").prepend('<div class="sticky border-' + settings.position + '" id="' + uniqID + '"></div>');
            $("#" + uniqID).append('<a class="sticky-close" rel="' + uniqID + '" title="Close" /></a');
            $("#" + uniqID).append('<div class="sticky-note" rel="' + uniqID + '">' + note + "</div>");
            var height = $("#" + uniqID).height();
            $("#" + uniqID).css("height", height);
            $("#" + uniqID).slideDown(settings.speed);
            display = true
        }
        $(".sticky").ready(function () {
            if (settings.autoclose) {
                $("#" + uniqID).delay(settings.autoclose).fadeOut(settings.speed)
            }
        });
        $(".sticky-close").click(function () {
            $("#" + $(this).attr("rel")).dequeue().fadeOut(settings.speed)
        });
        var response = {
            id: uniqID,
            duplicate: duplicate,
            displayed: display,
            position: settings.position
        };
        if (callback) {
            callback(response)
        } else {
            return (response)
        }
    }
})(jQuery);